(function(t,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(t=typeof globalThis<"u"?globalThis:t||self,t["vue3-popover"]=d(t.Vue))})(this,function(t){"use strict";const d={class:"popover-wrapper"},b={class:"popover-content"},w={key:0,class:"popover-title"},y=t.defineComponent({__name:"popover",props:{placement:{default:"bottom"},width:{default:150},title:{default:""},content:{default:""},zIndex:{default:1999},trigger:{default:"click"},popperClass:{default:""},appendTo:{default:"body"},darkMode:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["open","close"],setup(p,{emit:f}){const i=p,u=a=>typeof a=="number",n=t.ref(!1),g=()=>{n.value=!0,m("open")},h=()=>{n.value=!1,m("close")},v=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],c=t.ref(),s=t.ref(),o=t.ref(),m=f;t.watch(()=>n.value,a=>{!a||t.nextTick(()=>{if(!c.value){o.value=null;return}o.value=c.value.getBoundingClientRect()})});const _=()=>{i.trigger!=="click"||i.disabled||(n.value?h():g())},B=()=>{i.trigger!=="hover"||i.disabled||g()},C=()=>{i.trigger!=="hover"||i.disabled||h()},R=t.computed(()=>{if(!s.value||!o.value)return{};const a=s.value.getBoundingClientRect();let e=0,l=0,r=i.placement;switch(v.includes(r)||(r="bottom"),r){case"left":e=o.value.width-5,l=o.value.height/2-5;break;case"left-start":e=o.value.width-5,l=a.height/2-5;break;case"left-end":e=o.value.width-5,l=o.value.height-a.height/2-5;break;case"right":e=-5,l=o.value.height/2-5;break;case"right-start":e=-5,l=a.height/2-5;break;case"right-end":e=-5,l=o.value.height-a.height/2-5;break;case"top":e=o.value.width/2-5,l=o.value.height-5;break;case"top-start":e=a.width/2-5,l=o.value.height-5;break;case"top-end":e=o.value.width-a.width/2-5,l=o.value.height-5;break;case"bottom":e=o.value.width/2-5,l=-5;break;case"bottom-start":e=a.width/2-5,l=-5;break;case"bottom-end":e=o.value.width-a.width/2-5,l=-5;break}return l>o.value.height&&(l=o.value.height-20),e>o.value.width&&(e=o.value.width-20),{left:`${e}px`,top:`${l}px`}}),S=t.computed(()=>{if(!s.value||!o.value)return{};let a=i.placement;v.includes(a)||(a="bottom");const e=s.value.getBoundingClientRect();let l=0,r=0;switch(a){case"left":l=e.top-o.value.height/2+e.height/2,r=e.left-o.value.width-10;break;case"left-start":l=e.top,r=e.left-o.value.width-10;break;case"left-end":l=e.top-o.value.height+e.height,r=e.left-o.value.width-10;break;case"right":l=e.top-o.value.height/2+e.height/2,r=e.left+e.width+10;break;case"right-start":l=e.top,r=e.left+e.width+10;break;case"right-end":l=e.top-o.value.height+e.height,r=e.left+e.width+10;break;case"top":l=e.top-o.value.height-10,r=e.left-o.value.width/2+e.width/2;break;case"top-start":l=e.top-o.value.height-10,r=e.left;break;case"top-end":l=e.top-o.value.height-10,r=e.left+e.width-o.value.width;break;case"bottom":l=e.top+e.height+10,r=e.left-o.value.width/2+e.width/2;break;case"bottom-start":l=e.top+e.height+10,r=e.left;break;case"bottom-end":l=e.top+e.height+10,r=e.left+e.width-o.value.width;break}return{position:"absolute",top:`${l}px`,left:`${r}px`}}),k=a=>{c.value&&!c.value.contains(a.target)&&!s.value.contains(a.target)&&h()};return t.onMounted(()=>{window.addEventListener("click",k)}),t.onUnmounted(()=>{h(),window.removeEventListener("click",k)}),(a,e)=>(t.openBlock(),t.createElementBlock("div",d,[t.createElementVNode("span",{class:"popover-trigger",ref_key:"triggerRef",ref:s,onClick:_,onMouseenter:B,onMouseleave:C},[t.renderSlot(a.$slots,"reference",{},void 0,!0)],544),(t.openBlock(),t.createBlock(t.Teleport,{to:a.appendTo},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[n.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["popover",[a.popperClass,{"dark-mode":a.darkMode}]]),style:t.normalizeStyle([{zIndex:a.zIndex,width:u(i.width)?i.width+"px":i.width},S.value]),ref_key:"popoverRef",ref:c},[t.createElementVNode("div",{class:t.normalizeClass(["popover-arrow","popover-arrow__"+a.placement]),style:t.normalizeStyle(R.value)},null,6),t.createElementVNode("div",b,[a.title?(t.openBlock(),t.createElementBlock("div",w,t.toDisplayString(a.title),1)):t.createCommentVNode("",!0),a.$slots.default?t.renderSlot(a.$slots,"default",{key:2},void 0,!0):t.renderSlot(a.$slots,"default",{key:1},()=>[t.createTextVNode(t.toDisplayString(a.content),1)],!0)])],6)):t.createCommentVNode("",!0)]),_:3})],8,["to"]))]))}}),E="";return((p,f)=>{const i=p.__vccOpts||p;for(const[u,n]of f)i[u]=n;return i})(y,[["__scopeId","data-v-ea753d0c"]])});
