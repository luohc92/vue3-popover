(function(t,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(t=typeof globalThis<"u"?globalThis:t||self,t["vue3-popover"]=c(t.Vue))})(this,function(t){"use strict";const c={class:"popover-wrapper"},g={class:"popover-content"},v={key:0,class:"popover-title"},m=t.defineComponent({__name:"popover",props:{placement:{default:"bottom"},width:{default:150},title:{default:""},content:{default:""},zIndex:{default:1999},trigger:{default:"click"}},setup(h){const i=h,p=a=>typeof a=="number",n=t.ref(!1),f=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],d=t.ref(),s=t.ref(),o=t.ref();t.watch(()=>n.value,a=>{!a||t.nextTick(()=>{if(!d.value){o.value=null;return}o.value=d.value.getBoundingClientRect()})});const k=()=>{i.trigger==="click"&&(n.value=!n.value)},w=()=>{i.trigger==="hover"&&(n.value=!0)},b=()=>{i.trigger==="hover"&&(n.value=!1)},_=t.computed(()=>{if(!s.value||!o.value)return{};const a=s.value.getBoundingClientRect();let e=0,l=0,r=i.placement;switch(f.includes(r)||(r="bottom"),r){case"left":e=o.value.width-5,l=o.value.height/2-5;break;case"left-start":e=o.value.width-5,l=a.height/2-5;break;case"left-end":e=o.value.width-5,l=o.value.height-a.height/2-5;break;case"right":e=-5,l=o.value.height/2-5;break;case"right-start":e=-5,l=a.height/2-5;break;case"right-end":e=-5,l=o.value.height-a.height/2-5;break;case"top":e=o.value.width/2-5,l=o.value.height-5;break;case"top-start":e=a.width/2-5,l=o.value.height-5;break;case"top-end":e=o.value.width-a.width/2-5,l=o.value.height-5;break;case"bottom":e=o.value.width/2-5,l=-5;break;case"bottom-start":e=a.width/2-5,l=-5;break;case"bottom-end":e=o.value.width-a.width/2-5,l=-5;break}return l>o.value.height&&(l=o.value.height-20),e>o.value.width&&(e=o.value.width-20),{left:`${e}px`,top:`${l}px`}}),y=t.computed(()=>{if(!s.value||!o.value)return{};let a=i.placement;f.includes(a)||(a="bottom");const e=s.value.getBoundingClientRect();let l=0,r=0;switch(a){case"left":l=e.top-o.value.height/2+e.height/2,r=e.left-o.value.width-10;break;case"left-start":l=e.top,r=e.left-o.value.width-10;break;case"left-end":l=e.top-o.value.height+e.height,r=e.left-o.value.width-10;break;case"right":l=e.top-o.value.height/2+e.height/2,r=e.left+e.width+10;break;case"right-start":l=e.top,r=e.left+e.width+10;break;case"right-end":l=e.top-o.value.height+e.height,r=e.left+e.width+10;break;case"top":l=e.top-o.value.height-10,r=e.left-o.value.width/2+e.width/2;break;case"top-start":l=e.top-o.value.height-10,r=e.left;break;case"top-end":l=e.top-o.value.height-10,r=e.left+e.width-o.value.width;break;case"bottom":l=e.top+e.height+10,r=e.left-o.value.width/2+e.width/2;break;case"bottom-start":l=e.top+e.height+10,r=e.left;break;case"bottom-end":l=e.top+e.height+10,r=e.left+e.width-o.value.width;break}return{position:"absolute",top:`${l}px`,left:`${r}px`}}),u=a=>{d.value&&!d.value.contains(a.target)&&!s.value.contains(a.target)&&(n.value=!1)};return t.onMounted(()=>{window.addEventListener("click",u)}),t.onUnmounted(()=>{n.value=!1,window.removeEventListener("click",u)}),(a,e)=>(t.openBlock(),t.createElementBlock("div",c,[t.createElementVNode("span",{class:"popover-trigger",ref_key:"triggerRef",ref:s,onClick:k,onMouseenter:w,onMouseleave:b},[t.renderSlot(a.$slots,"reference",{},void 0,!0)],544),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.createVNode(t.Transition,{name:"fade"},{default:t.withCtx(()=>[n.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:"popover",style:t.normalizeStyle([{zIndex:a.zIndex,width:p(i.width)?i.width+"px":i.width},y.value]),ref_key:"popoverRef",ref:d},[t.createElementVNode("div",{class:t.normalizeClass(["popover-arrow","popover-arrow__"+a.placement]),style:t.normalizeStyle(_.value)},null,6),t.createElementVNode("div",g,[a.title?(t.openBlock(),t.createElementBlock("div",v,t.toDisplayString(a.title),1)):t.createCommentVNode("",!0),a.$slots.default?t.renderSlot(a.$slots,"default",{key:2},void 0,!0):t.renderSlot(a.$slots,"default",{key:1},()=>[t.createTextVNode(t.toDisplayString(a.content),1)],!0)])],4)):t.createCommentVNode("",!0)]),_:3})]))]))}}),B="";return((h,i)=>{const p=h.__vccOpts||h;for(const[n,f]of i)p[n]=f;return p})(m,[["__scopeId","data-v-db121eef"]])});
