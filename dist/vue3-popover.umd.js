(function(t,p){typeof exports=="object"&&typeof module<"u"?module.exports=p(require("vue")):typeof define=="function"&&define.amd?define(["vue"],p):(t=typeof globalThis<"u"?globalThis:t||self,t["vue3-popover"]=p(t.Vue))})(this,function(t){"use strict";const p={class:"popover-wrapper"},S={class:"popover-content"},T={key:0,class:"popover-title"},B=t.defineComponent({__name:"popover",props:{placement:String,width:{type:[String,Number],default:200},title:String,content:String,zIndex:{type:Number,default:1999},trigger:{type:String,default:"click"},popperClass:String,appendTo:{type:String,default:"body"},darkMode:Boolean,disabled:Boolean},emits:["open","close"],setup(n,{emit:f}){const i=n,v=r=>typeof r=="number",c=t.ref(!1),g=()=>{c.value=!0,b("open")},w=()=>{c.value=!1,u.value=!1,b("close")},m=["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],d=t.ref(),h=t.ref(),o=t.ref(),b=f;t.watch(()=>c.value,r=>{!r||t.nextTick(()=>{if(!d.value){o.value=null;return}o.value=d.value.getBoundingClientRect()})});const C=()=>{i.trigger!=="click"||i.disabled||(c.value?w():g())},s=t.ref(),_=()=>{i.trigger!=="hover"||i.disabled||(s.value&&clearTimeout(s.value),u.value=!1,g())},u=t.ref(!1),x=()=>{i.trigger!=="hover"||i.disabled||(s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{u.value||w()},300))},R=()=>{i.trigger!=="hover"||i.disabled||(u.value=!1,s.value&&clearTimeout(s.value),s.value=setTimeout(()=>{u.value||w()},300))},X=()=>{u.value=!0,s.value&&clearTimeout(s.value)},Y=t.computed(()=>{if(!h.value||!o.value)return{};const r=h.value.getBoundingClientRect();let e=0,l=0,a=i.placement||"bottom";switch(m.includes(a)||(a="bottom"),a){case"left":e=o.value.width-5,l=o.value.height/2-5;break;case"left-start":e=o.value.width-5,l=r.height/2-5;break;case"left-end":e=o.value.width-5,l=o.value.height-r.height/2-5;break;case"right":e=-5,l=o.value.height/2-5;break;case"right-start":e=-5,l=r.height/2-5;break;case"right-end":e=-5,l=o.value.height-r.height/2-5;break;case"top":e=o.value.width/2-5,l=o.value.height-5;break;case"top-start":e=r.width/2-5,l=o.value.height-5;break;case"top-end":e=o.value.width-r.width/2-5,l=o.value.height-5;break;case"bottom":e=o.value.width/2-5,l=-5;break;case"bottom-start":e=r.width/2-5,l=-5;break;case"bottom-end":e=o.value.width-r.width/2-5,l=-5;break}return l>o.value.height&&(l=o.value.height-20),e>o.value.width&&(e=o.value.width-20),{left:`${e}px`,top:`${l}px`}}),E=t.computed(()=>{if(!h.value||!o.value)return{};let r=i.placement||"bottom";m.includes(r)||(r="bottom");const e=h.value.getBoundingClientRect();let l=0,a=0;switch(r){case"left":l=e.top-o.value.height/2+e.height/2+window.scrollY,a=e.left-o.value.width-10+window.scrollX;break;case"left-start":l=e.top+window.scrollY,a=e.left-o.value.width-10+window.scrollX;break;case"left-end":l=e.top-o.value.height+e.height+window.scrollY,a=e.left-o.value.width-10+window.scrollX;break;case"right":l=e.top-o.value.height/2+e.height/2+window.scrollY,a=e.left+e.width+10+window.scrollX;break;case"right-start":l=e.top+window.scrollY,a=e.left+e.width+10+window.scrollX;break;case"right-end":l=e.top-o.value.height+e.height+window.scrollY,a=e.left+e.width+10+window.scrollX;break;case"top":l=e.top-o.value.height-10+window.scrollY,a=e.left-o.value.width/2+e.width/2+window.scrollX;break;case"top-start":l=e.top-o.value.height-10+window.scrollY,a=e.left+window.scrollX;break;case"top-end":l=e.top-o.value.height-10+window.scrollY,a=e.left+e.width-o.value.width+window.scrollX;break;case"bottom":l=e.top+e.height+10+window.scrollY,a=e.left-o.value.width/2+e.width/2+window.scrollX;break;case"bottom-start":l=e.top+e.height+10+window.scrollY,a=e.left+window.scrollX;break;case"bottom-end":l=e.top+e.height+10+window.scrollY,a=e.left+e.width-o.value.width+window.scrollX;break}return{position:"absolute",top:`${l}px`,left:`${a}px`}}),k=()=>{d.value&&(o.value=d.value.getBoundingClientRect())},y=r=>{d.value&&!d.value.contains(r.target)&&!h.value.contains(r.target)&&w()};return t.onMounted(()=>{window.addEventListener("resize",k),window.addEventListener("click",y)}),t.onUnmounted(()=>{c.value=!1,u.value=!1,window.removeEventListener("resize",k),window.removeEventListener("click",y)}),(r,e)=>(t.openBlock(),t.createElementBlock("div",p,[t.createElementVNode("span",{class:"popover-trigger",ref_key:"triggerRef",ref:h,onClick:C,onMouseenter:_,onMouseleave:x},[t.renderSlot(r.$slots,"reference",{},void 0,!0)],544),(t.openBlock(),t.createBlock(t.Teleport,{to:n.appendTo},[t.createVNode(t.Transition,{name:"popoverfade"},{default:t.withCtx(()=>[c.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["popover",[n.popperClass,{"dark-mode":n.darkMode}]]),onMouseleave:R,onMouseenter:X,style:t.normalizeStyle([{zIndex:n.zIndex,width:v(i.width)?i.width+"px":i.width},E.value]),ref_key:"popoverRef",ref:d},[t.createElementVNode("div",{class:t.normalizeClass(["popover-arrow","popover-arrow__"+n.placement]),style:t.normalizeStyle(Y.value)},null,6),t.createElementVNode("div",S,[n.title?(t.openBlock(),t.createElementBlock("div",T,t.toDisplayString(n.title),1)):t.createCommentVNode("",!0),r.$slots.default?t.renderSlot(r.$slots,"default",{key:2},void 0,!0):t.renderSlot(r.$slots,"default",{key:1},()=>[t.createTextVNode(t.toDisplayString(n.content),1)],!0)])],38)):t.createCommentVNode("",!0)]),_:3})],8,["to"]))]))}}),N="";return((n,f)=>{const i=n.__vccOpts||n;for(const[v,c]of f)i[v]=c;return i})(B,[["__scopeId","data-v-3b19b6e5"]])});
